-- Define necessary services and variables
local Players = game:GetService("Players")
local ReplicatedStorage = game:GetService("ReplicatedStorage")
local Workspace = game:GetService("Workspace")

local player = Players.LocalPlayer
local character = player.Character or player.CharacterAdded:Wait()
local HRoot = character:WaitForChild("HumanoidRootPart")

-- Variables
local OldPos = HRoot.CFrame

-- Function to find evidence
local function findEvidence()
    for i = 1, 2 do
        local fire = fireproximityprompt or ReplicatedStorage:FindFirstChild("ReportEvidence")
        
        -- Define the evidence paths
        local evidencePaths = {
            Workspace:FindFirstChild("Map"):FindFirstChild("Van"):FindFirstChild("Van"):FindFirstChild("LeaveButton"):FindFirstChild("LightSwitch"):FindFirstChild("ProximityPrompt"),
            Workspace:FindFirstChild("Map"):FindFirstChild("Van"):FindFirstChild("Van"):FindFirstChild("LeaveButton"):FindFirstChild("LightSwitch"):GetChildren()[3]
        }

        -- Loop through each path and try to interact with it
        for _, e in ipairs(evidencePaths) do
            if e and e:IsA("BasePart") then -- Only interact if e is a BasePart
                -- Check if interaction is needed
                local interactionDone = false
                repeat
                    pcall(function()
                        HRoot.CFrame = e.CFrame
                    end)
                    wait(0.2)
                    pcall(function()
                        if type(fire) == 'function' then
                            local proximity = e:FindFirstChildOfClass('ProximityPrompt') or e:FindFirstChild('ProximityPrompt')
                            if proximity then
                                fire(proximity)
                                interactionDone = true -- Mark interaction as done
                            end
                        elseif fire and fire:IsA("RemoteEvent") then
                            fire:FireServer(e)
                            interactionDone = true -- Mark interaction as done
                        end
                    end)
                until interactionDone or not e.Parent or not e or (e:IsA("BasePart") and e.Transparency == 1)
            elseif e and e:IsA("ProximityPrompt") then -- Handle ProximityPrompt separately
                -- Check if interaction is needed
                local interactionDone = false
                repeat
                    pcall(function()
                        HRoot.CFrame = e.Parent.CFrame -- Move to the parent of ProximityPrompt
                    end)
                    wait(0.2)
                    pcall(function()
                        if fire and fire:IsA("RemoteEvent") then
                            fire:FireServer(e)
                            interactionDone = true -- Mark interaction as done
                        end
                    end)
                until interactionDone or not e.Parent or not e
            end
        end
    end

    -- Return to original position
    HRoot.CFrame = OldPos
end

-- Execute the function
findEvidence()
